const showPrefecture=()=>{let t=$("#select-prefecture").val(),e=$("#map").width(),o=$("#map").height();$("#map").empty();let n=d3.geoMercator(),l=d3.select("#map"),a=d3.geoPath().projection(n),f=l.append("g"),r="./data/senkyoku289polygon_"+t+".json",c="senkyoku289polygon_"+t;d3.json(r).then(function(t){const l=topojson.feature(t,t.objects[c]);n.fitExtent([[0,0],[e,o]],l),f.selectAll("path").data(l.features).enter().append("path").attr("fill","#ffffff").attr("d",a).on("click tap touch",function(t,e){console.log(t.properties),f.selectAll("path").attr("fill","#ffffff"),d3.select(this).attr("fill","yellow")})});let s=d3.zoom().scaleExtent([1,2e3]).on("zoom",function(){f.selectAll("path").attr("transform",d3.event.transform)});l.transition().duration(0).call(s.transform,d3.zoomIdentity),l.call(s)};$(function(){$("#select-prefecture").on("change",function(){showPrefecture()}),showPrefecture()});